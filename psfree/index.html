<html>
    <head>
        <meta charset='utf-8'>
        <title>★ PSfree-Lapse ★</title>
        <link rel="icon" type="image/x-icon" href="favicon.ico" sizes="16x16">
        <style>
        body {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 20px;
            background-image: 
                radial-gradient(circle at center, rgba(0, 150, 0, 0.1) 0%, transparent 70%),
                linear-gradient(to bottom, rgba(0, 50, 0, 0.2) 0%, transparent 20%);
            text-shadow: 0 0 5px #0f0;
            position: relative;
            overflow-x: hidden;
            animation: flicker 20s infinite;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(rgba(0, 30, 0, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 30, 0, 0.3) 1px, transparent 1px);
            background-size: 3px 3px;
            pointer-events: none;
            z-index: -1;
        }

        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                rgba(0, 0, 0, 0) 50%, 
                rgba(0, 20, 0, 0.2) 50%
            );
            background-size: 100% 3px;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes flicker {
            0% { opacity: 0.9; }
            5% { opacity: 0.8; }
            10% { opacity: 0.95; }
            15% { opacity: 0.85; }
            20% { opacity: 1; }
            100% { opacity: 1; }
        }

        h2 {
            color: #ff0;
            text-align: center; 
            padding-bottom: 10px;
            text-shadow: 0 0 10px #ff0;
            font-size: 1.5em;
        }

        h4 {
            color: #ff0;
            text-align: center;
            margin-top: 30px;
            font-style: italic;
            text-shadow: 0 0 10px #ff0;
            margin-bottom: 15px;
        }

        #console {
            background-color: rgba(0, 20, 0, 0.7);
            border: 1px solid #0f0;
            padding: 8px 12px;
            margin: 10px auto;
            min-height: 400px;
            height: 400px;
            overflow-y: auto;
            box-shadow: 0 0 8px #0f0 inset;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.2;
            border-radius: 0;
            width: 70%;
        }

        /* Contenitore centrato per i pulsanti */
        .button-container {
            text-align: center;  /* Centra i pulsanti orizzontalmente */
            margin: 15px 0;     /* Spazio sopra/sotto */
            width: 100%;
        }

        /* Stile pulsanti vintage */
        #runBtn, #extraPayloadBtn {
            background-color: #000;
            color: #0f0;
            border: 2px solid #0f0;
            padding: 10px 20px;
            margin: 0 10px;      /* Spazio tra i pulsanti */
            font-family: 'Courier New', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            display: inline-block;  /* Necessario per il centramento */
            box-shadow: 0 0 5px #0f0;
        }

        #runBtn:hover, #extraPayloadBtn:hover {
            background-color: #0f0;
            color: #000;
            animation: glow 1.5s infinite;
        }

        #runBtn:active, #extraPayloadBtn:active {
            transform: translateY(2px);
            box-shadow: 0 0 5px #0f0 inset;
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px #0f0; }
            50% { box-shadow: 0 0 20px #0f0; }
            100% { box-shadow: 0 0 5px #0f0; }
        }
        </style>
    </head>
    <script>
        if (window.applicationCache.status=='0') {
            window.location.replace("cache.html");
        }
    </script>
    
    <!-- ⚠️ Avviso Fix ABC -->
    <script>
        if (!localStorage.getItem("psfree_warning_shown")) {
            alert(
                "⚠️ PSFree-Lapse - Avviso Importante\n\n" +
                "- È stata applicata una nuova correzione al file lapse.mjs (Fix ABC).\n" +
                "- Questo dovrebbe ridurre l'errore \"failed to make aliased pktopts\".\n\n" +
                "Attenzione: persistono problemi con alcuni giochi, come schermate nere, problemi con i salvataggi e diversi kernel panic.\n" +
                "Gli offset per PS4 FW 9.00 devono ancora essere verificati.\n\n" +
                "❗❗ PSFree-Lapse è ancora in sviluppo: NON usarlo come exploit predefinito su firmware 9.xx.\n\n" +
                "➡️ Prima di utilizzarlo, cancella cookie e cache del browser."
            );
            localStorage.setItem("psfree_warning_shown", "true");
        }
    </script>
    
    <body>
		<script>
    // Mostra il firmware rilevato nel div dedicato
    function rilevaFirmwarePS4() {
        const userAgent = navigator.userAgent;
        const match = userAgent.match(/PlayStation 4\/([\d.]+)/);
        const firmware = match ? match[1] : 'Non rilevato';

        const firmwareLine = document.getElementById('firmware-line');
        firmwareLine.innerHTML = `PS4 Firmware Version: ${firmware}`;
    }

    window.addEventListener('DOMContentLoaded', rilevaFirmwarePS4);
</script>
        <h2>★ PSFree-Lapse 1.5.1 Auto Exploit FW 8.00/9.60 ★<br>GoldHen v2.4b18.3 (Latest) </h2>
        
        <div class="button-container">
            <button id="runBtn">Run Exploit</button>
            <button id="extraPayloadBtn">Extra Payload</button>
        </div><br>

        <div id="console">PSFree-Lapse Mod v1.3.0<br><div id="firmware-line"></div>Inizializzazione exploit...</div>
        <h4>By.Oresterosso-TeamItalianModder</h4>
        
        <script>
            const consoleDiv = document.getElementById('console');
            const runBtn = document.getElementById('runBtn');
            const extraPayloadBtn = document.getElementById('extraPayloadBtn');

            // Osserva cambiamenti nel consoleDiv per trovare il messaggio di successo
            const observer = new MutationObserver(() => {
                if (consoleDiv.textContent.includes('kernel exploit succeeded!')) {
                    runBtn.textContent = "Exploit completato ✔";
                    runBtn.style.backgroundColor = "#0f0";
                    runBtn.style.color = "#000";
                    observer.disconnect();
                }
            });
            observer.observe(consoleDiv, { childList: true, subtree: true });

            runBtn.addEventListener('click', () => {
                // Carica alert.mjs come modulo
                let scriptAlert = document.createElement('script');
                scriptAlert.type = 'module';
                scriptAlert.src = 'alert.mjs';
                document.body.appendChild(scriptAlert);

                // Disattiva il pulsante per evitare ripetizioni
                runBtn.textContent = "Exploit in corso...";
                runBtn.disabled = true;
            });

            extraPayloadBtn.addEventListener('click', () => {
                window.location.href = './payload.html';
            });
        </script>
    </body>
</html>